<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToolCrib Requisiciones</title>

    <script src="[https://cdn.tailwindcss.com"></script]https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: { primary: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 900: '#1e3a8a' } },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'slide-in': 'slideIn 0.3s ease-out forwards',
                        'slide-out': 'slideOut 0.3s ease-in forwards'
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-50 font-sans text-gray-900">
    <div id="toast-container"></div>

    <div class="min-h-screen flex flex-col">
        <header class="bg-white shadow-sm sticky top-0 z-30 border-b border-gray-200 transition-all">
            <div class="max-w-7xl mx-auto px-4 h-16 flex justify-between items-center">
                <div class="flex items-center">
                    <button id="main-back-btn" class="hidden mr-3 p-2 text-gray-500 hover:bg-gray-100 rounded-full transition" title="Regresar"><svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg></button>
                    <span class="text-xl font-bold text-gray-900">ToolCrib <span class="text-primary-600">Admin</span></span>
                </div>
                <div class="flex items-center gap-3">
                    <span id="user-email-display" class="text-sm text-gray-500 hidden sm:inline"></span>
                    <button id="btn-login-icon" class="text-gray-400 hover:text-primary-600 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" /></svg></button>
                    <button id="btn-logout" class="hidden btn btn-secondary text-xs">Salir</button>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto p-4 sm:p-6">

            <div id="home-screen" class="screen-content animate-fade-in">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-3 bg-gradient-to-r from-primary-600 to-primary-800 rounded-2xl p-8 text-white shadow-lg flex flex-col md:flex-row items-center justify-between">
                        <div>
                            <h1 class="text-3xl font-bold mb-2">Panel de Control</h1>
                            <p class="text-primary-100">Gestiona cat치logo, usuarios y estad칤sticas.</p>
                        </div>
                        <button data-navigate-to="admin-screen" class="mt-4 md:mt-0 bg-white text-primary-700 px-6 py-3 rounded-xl font-bold shadow-md hover:bg-gray-50 transition transform hover:-translate-y-1">
                            Entrar al Sistema
                        </button>
                    </div>
                </div>
            </div>

            <div id="admin-screen" class="screen-content hidden animate-fade-in space-y-8">

                <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
                    <div class="p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                        <h2 id="art-form-title" class="text-lg font-bold text-gray-800 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" /></svg>
                            Cat치logo Maestro
                        </h2>
                        <input type="search" id="admin-art-search" class="w-64 rounded-lg border-gray-300 text-sm focus:ring-primary-500" placeholder="Buscar art칤culo...">
                    </div>

                    <div class="p-6 grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-1 bg-gray-50 p-5 rounded-xl border border-gray-200 h-fit sticky top-24">
                            <form id="form-add-articulo" class="space-y-4">
                                <input type="hidden" id="admin-art-original-num">
                                <div class="flex gap-3">
                                    <div class="w-1/3"><label class="text-xs font-bold text-gray-500 uppercase ml-1">No. Parte</label><input type="text" id="admin-art-num" placeholder="Ej. 123-ABC" required class="w-full rounded-lg border-gray-300 focus:ring-primary-500 text-sm"></div>
                                    <div class="w-2/3"><label class="text-xs font-bold text-gray-500 uppercase ml-1">Descripci칩n</label><input type="text" id="admin-art-nom" placeholder="Descripci칩n" required class="w-full rounded-lg border-gray-300 focus:ring-primary-500 text-sm"></div>
                                </div>
                                <div class="flex gap-3">
                                    <div class="w-1/2"><label class="text-xs font-bold text-gray-500 uppercase ml-1">Categor칤a</label><select id="admin-art-cat" required class="w-full rounded-lg border-gray-300 text-sm focus:ring-primary-500"><option value="">Selecciona...</option></select></div>
                                    <div class="w-1/2"><label class="text-xs font-bold text-gray-500 uppercase ml-1">Precio ($)</label><input type="number" id="admin-art-precio" placeholder="0.00" step="0.01" min="0" class="w-full rounded-lg border-gray-300 text-sm"></div>
                                </div>
                                <div><label class="text-xs font-bold text-gray-500 uppercase ml-1">Imagen (URL)</label><input type="text" id="admin-art-img" placeholder="[https://...]https://..." class="w-full rounded-lg border-gray-300 text-sm text-gray-500"></div>

                                <div class="border-t border-gray-200 pt-3 mt-1">
                                    <div class="flex items-center gap-2 mb-2">
                                        <input type="checkbox" id="admin-art-hasVariants" class="h-4 w-4 rounded text-primary-600 focus:ring-primary-500">
                                        <label for="admin-art-hasVariants" class="text-sm font-bold text-gray-700">Tiene Variantes</label>
                                    </div>
                                    <div id="admin-variants-panel" class="hidden bg-white p-3 rounded-lg border border-gray-300 shadow-inner">
                                        <div class="flex justify-between text-xs font-bold text-gray-400 mb-2 px-1">
                                            <span class="w-1/2">Nombre</span><span class="w-1/2">C칩digo</span><span class="w-6"></span>
                                        </div>
                                        <div id="variants-list-container" class="space-y-2"></div>
                                        <button type="button" onclick="window.addVariantRow()" class="mt-3 w-full py-1.5 text-xs font-bold text-primary-600 border border-dashed border-primary-300 rounded hover:bg-primary-50 flex items-center justify-center gap-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>Agregar Variante</button>
                                    </div>
                                </div>

                                <div class="mt-2"><label class="block text-sm font-medium text-gray-700 mb-2">Asignar a Listas:</label><div id="admin-art-lists" class="grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-24 overflow-y-auto border rounded-lg p-3 bg-white"></div></div>
                                <div class="flex gap-2 pt-4">
                                    <button type="button" id="btn-cancel-art" class="hidden btn btn-secondary w-1/3">Cancelar</button>
                                    <button type="submit" class="btn btn-primary w-full font-bold shadow-md">Guardar Art칤culo</button>
                                </div>
                            </form>
                        </div>

                        <div class="lg:col-span-2 flex flex-col h-[600px]">
                            <div id="admin-list-articulos" class="flex-grow overflow-y-auto pr-2 space-y-3"></div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 h-96 flex flex-col">
                        <h2 class="text-lg font-bold mb-4 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>Empleados</h2>
                        <div class="flex gap-2 mb-4"><input type="file" id="file-upload-emp" accept=".xlsx, .csv" class="hidden"><button onclick="document.getElementById('file-upload-emp').click()" class="flex-1 px-3 py-1.5 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition flex items-center justify-center gap-1">游닌 Cargar Excel</button></div>
                        <form id="form-add-empleado" class="flex gap-2 mb-4"><input type="number" id="admin-emp-id" placeholder="ID" class="w-1/3 rounded-lg border-gray-300 text-sm" required><input type="text" id="admin-emp-nombre" placeholder="Nombre" class="w-full rounded-lg border-gray-300 text-sm" required><button type="submit" class="btn btn-primary p-2">+</button></form>
                        <div id="admin-list-empleados" class="flex-grow overflow-y-auto border rounded-lg bg-gray-50 p-1 divide-y"></div>
                    </div>

                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 h-96 flex flex-col">
                        <h2 class="text-lg font-bold mb-4 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-primary-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm3.293 1.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L7.586 10 5.293 7.707a1 1 0 010-1.414zM11 12a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" /></svg>Categor칤as y Listas</h2>
                        <div class="flex gap-2 mb-2"><input type="text" id="admin-cat-name" placeholder="Nueva Categor칤a" class="w-full rounded-lg border-gray-300 text-sm"><button id="btn-add-cat-manual" class="btn btn-primary p-2">+</button></div>
                        <div id="admin-list-categorias" class="h-1/2 overflow-y-auto border rounded-lg bg-gray-50 p-1 divide-y mb-4"></div>
                        <div class="flex gap-2 mb-2"><input type="text" id="admin-list-name" placeholder="Nueva Lista R치pida" class="w-full rounded-lg border-gray-300 text-sm"><button id="btn-add-list-manual" class="btn btn-primary p-2">+</button></div>
                        <div id="admin-list-lists" class="h-1/2 overflow-y-auto border rounded-lg bg-gray-50 p-1 divide-y"></div>
                    </div>
                </div>
            </div>

            <div id="login-modal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm"><h2 class="text-2xl font-bold text-center mb-6">Acceso Admin</h2><form id="form-login" class="space-y-4"><input type="email" id="login-email" required class="w-full rounded-lg" placeholder="Email"><input type="password" id="login-pass" required class="w-full rounded-lg" placeholder="Contrase침a"><button type="submit" class="btn btn-primary w-full py-3">Entrar</button></form><button type="button" onclick="closeModal('login-modal')" class="w-full text-center text-gray-500 text-sm mt-4">Cancelar</button></div></div>
            <div id="confirm-modal" class="hidden fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4"><div class="bg-white rounded-xl p-6 w-full max-w-sm text-center"><h3 id="confirm-title" class="text-lg font-bold mb-2">Confirmar</h3><p id="confirm-message" class="text-gray-500 mb-6 text-sm"></p><div class="flex gap-3"><button onclick="closeModal('confirm-modal')" class="btn btn-secondary flex-1">Cancelar</button><button id="btn-confirm-ok" class="btn btn-danger flex-1">Confirmar</button></div></div></div>
            <div id="qr-modal" class="hidden fixed inset-0 bg-black/60 z-[70] flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6 text-center"><h2 class="text-xl font-bold mb-2">C칩digo QR</h2><p id="qr-category-name" class="text-primary-600 mb-4"></p><div class="bg-white p-4 border-2 border-dashed border-gray-300 rounded-xl inline-block mb-6"><div id="qrcode-container"></div></div><div class="flex flex-col gap-3"><button onclick="imprimirQR()" class="btn btn-primary w-full">Imprimir</button><button onclick="closeModal('qr-modal')" class="btn btn-secondary w-full">Cerrar</button></div></div></div>
        </main>

    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
